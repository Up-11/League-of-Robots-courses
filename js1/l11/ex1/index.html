<!DOCTYPE html>
<html lang="ru">
	<head>
		<meta charset="UTF-8" />
		<title>Фильтр сообщений</title>
		<style>
			body {
				font-family: Arial, sans-serif;
				padding: 20px;
				background-color: #f0f0f0;
			}
			#messagesList div {
				background-color: white;
				padding: 10px;
				margin-bottom: 10px;
				border-radius: 6px;
				box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
			}
			.highlight {
				color: green;
				font-weight: bold;
			}
			textarea,
			input {
				width: 100%;
				padding: 10px;
				margin-bottom: 10px;
			}
			button {
				padding: 10px;
				margin-right: 5px;
			}
		</style>
	</head>
	<body>
		<h2>Добавить сообщение</h2>
		<textarea
			id="messageInput"
			rows="3"
			placeholder="Введите сообщение..."
		></textarea>
		<button onclick="addMessage()">Добавить</button>

		<h2>Фильтр по слову</h2>
		<input
			type="text"
			id="filterInput"
			placeholder="Введите ключевое слово..."
		/>
		<button onclick="filterMessages()">Фильтровать</button>
		<button onclick="resetMessages()">Сбросить</button>

		<h2>Сообщения</h2>
		<div id="messagesList"></div>

		<script>
			let messages = []

			function addMessage() {
				const text = document.getElementById('messageInput').value
				if (text.trim() !== '') {
					messages.push(text)
					document.getElementById('messageInput').value = ''
					showMessages(messages)
				}
			}

			function showMessages(msgs) {
				const list = document.getElementById('messagesList')
				list.innerHTML = ''
				for (let i = 0; i < msgs.length; i++) {
					const div = document.createElement('div')
					div.innerHTML = msgs[i]
					list.appendChild(div)
				}
			}

			function filterMessages() {
				const keyword = document
					.getElementById('filterInput')
					.value.toLowerCase()
				const filtered = []
				for (let i = 0; i < messages.length; i++) {
					let msg = messages[i]
					if (msg.toLowerCase().includes(keyword)) {
						let highlighted = msg.replace(
							new RegExp(keyword, 'gi'),
							function (match) {
								return '<span class="highlight">' + match + '</span>'
							}
						)
						filtered.push(highlighted)
					}
				}
				const list = document.getElementById('messagesList')
				list.innerHTML = ''
				for (let i = 0; i < filtered.length; i++) {
					const div = document.createElement('div')
					div.innerHTML = filtered[i]
					list.appendChild(div)
				}
			}

			function resetMessages() {
				document.getElementById('filterInput').value = ''
				showMessages(messages)
			}
		</script>
	</body>
</html>
