<!DOCTYPE html>
<html lang="ru">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>–ö–∏–Ω–æ—Ç–µ–∫–∞ - –î–æ–±–∞–≤–∏—Ç—å —Ñ–∏–ª—å–º</title>
		<style>
			* {
				margin: 0;
				padding: 0;
				box-sizing: border-box;
			}

			body {
				font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
				background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
				color: #fff;
				min-height: 100vh;
			}

			.container {
				max-width: 800px;
				margin: 0 auto;
				padding: 20px;
			}

			.header {
				text-align: center;
				margin-bottom: 40px;
				padding: 30px 0;
				background: rgba(255, 255, 255, 0.05);
				border-radius: 15px;
			}

			.header h1 {
				font-size: 3em;
				background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
				-webkit-background-clip: text;
				-webkit-text-fill-color: transparent;
				margin-bottom: 10px;
			}

			.nav {
				display: flex;
				justify-content: center;
				gap: 20px;
				margin-bottom: 30px;
				flex-wrap: wrap;
			}

			.nav-btn {
				padding: 12px 25px;
				background: rgba(255, 255, 255, 0.1);
				border: none;
				border-radius: 25px;
				color: white;
				cursor: pointer;
				transition: all 0.3s ease;
				font-size: 16px;
				text-decoration: none;
			}

			.nav-btn:hover {
				background: rgba(255, 255, 255, 0.2);
				transform: translateY(-2px);
			}

			.form {
				background: rgba(255, 255, 255, 0.05);
				padding: 30px;
				border-radius: 15px;
				margin-bottom: 30px;
			}

			.form-grid {
				display: grid;
				grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
				gap: 20px;
				margin-bottom: 20px;
			}

			.form-group {
				display: flex;
				flex-direction: column;
			}

			.form-group label {
				margin-bottom: 8px;
				font-weight: 500;
				color: #4ecdc4;
			}

			.form-group input,
			.form-group select,
			.form-group textarea {
				padding: 12px;
				border: none;
				border-radius: 8px;
				background: rgba(255, 255, 255, 0.1);
				color: white;
				font-size: 14px;
			}

			.form-group textarea {
				height: 100px;
				resize: vertical;
			}

			.buttons {
				display: flex;
				gap: 15px;
				justify-content: center;
			}

			.btn {
				padding: 12px 25px;
				border: none;
				border-radius: 8px;
				cursor: pointer;
				transition: all 0.3s ease;
				font-size: 16px;
			}

			.btn-primary {
				background: #4ecdc4;
				color: white;
			}

			.btn-secondary {
				background: rgba(255, 255, 255, 0.1);
				color: white;
			}

			.btn:hover {
				transform: translateY(-2px);
				box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
			}

			.message {
				padding: 15px;
				margin-bottom: 20px;
				border-radius: 8px;
				text-align: center;
			}

			.error {
				background: rgba(255, 107, 107, 0.2);
				border: 1px solid #ff6b6b;
				color: #ff6b6b;
			}

			.success {
				background: rgba(78, 205, 196, 0.2);
				border: 1px solid #4ecdc4;
				color: #4ecdc4;
			}
		</style>
	</head>
	<body>
		<div class="container">
			<div class="header">
				<h1>üé¨ –ö–∏–Ω–æ—Ç–µ–∫–∞</h1>
				<p>–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ñ–∏–ª—å–º–∞</p>
			</div>

			<div class="nav">
				<a href="index.html" class="nav-btn">üè† –ì–ª–∞–≤–Ω–∞—è</a>
				<a href="movies.html" class="nav-btn">üé• –í—Å–µ —Ñ–∏–ª—å–º—ã</a>
				<a href="add-movie.html" class="nav-btn">‚ûï –î–æ–±–∞–≤–∏—Ç—å —Ñ–∏–ª—å–º</a>
			</div>

			<div id="message"></div>

			<div class="form">
				<h2 style="text-align: center; margin-bottom: 30px; color: #4ecdc4">
					–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Ñ–∏–ª—å–º
				</h2>
				<div class="form-grid">
					<div class="form-group">
						<label>–ù–∞–∑–≤–∞–Ω–∏–µ —Ñ–∏–ª—å–º–∞ *</label>
						<input type="text" id="movie-title" required />
					</div>
					<div class="form-group">
						<label>–ì–æ–¥ –≤—ã–ø—É—Å–∫–∞ *</label>
						<input
							type="number"
							id="movie-year"
							min="1900"
							max="2030"
							required
						/>
					</div>
					<div class="form-group">
						<label>–ñ–∞–Ω—Ä *</label>
						<select id="movie-genre" required>
							<option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∂–∞–Ω—Ä</option>
							<option value="–¥—Ä–∞–º–∞">–î—Ä–∞–º–∞</option>
							<option value="–∫–æ–º–µ–¥–∏—è">–ö–æ–º–µ–¥–∏—è</option>
							<option value="–±–æ–µ–≤–∏–∫">–ë–æ–µ–≤–∏–∫</option>
							<option value="—Ñ–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞">–§–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞</option>
							<option value="—É–∂–∞—Å—ã">–£–∂–∞—Å—ã</option>
							<option value="—Ä–æ–º–∞–Ω—Ç–∏–∫–∞">–†–æ–º–∞–Ω—Ç–∏–∫–∞</option>
							<option value="—Ç—Ä–∏–ª–ª–µ—Ä">–¢—Ä–∏–ª–ª–µ—Ä</option>
							<option value="–¥–æ–∫—É–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π">–î–æ–∫—É–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π</option>
						</select>
					</div>
					<div class="form-group">
						<label>–†–µ–∂–∏—Å—Å–µ—Ä</label>
						<input type="text" id="movie-director" />
					</div>
					<div class="form-group">
						<label>–†–µ–π—Ç–∏–Ω–≥ (0-10)</label>
						<input
							type="number"
							id="movie-rating"
							min="0"
							max="10"
							step="0.1"
						/>
					</div>
					<div class="form-group">
						<label>–°—Ç–∞—Ç—É—Å –ø—Ä–æ—Å–º–æ—Ç—Ä–∞</label>
						<select id="movie-status">
							<option value="towatch">–ö –ø—Ä–æ—Å–º–æ—Ç—Ä—É</option>
							<option value="watched">–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ</option>
						</select>
					</div>
				</div>
				<div class="form-group">
					<label>–û–ø–∏—Å–∞–Ω–∏–µ</label>
					<textarea
						id="movie-description"
						placeholder="–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å—é–∂–µ—Ç–∞..."
					></textarea>
				</div>
				<div class="buttons">
					<button id="submit-movie" class="btn btn-primary">
						–î–æ–±–∞–≤–∏—Ç—å —Ñ–∏–ª—å–º
					</button>
					<button type="button" id="reset-form" class="btn btn-secondary">
						–û—á–∏—Å—Ç–∏—Ç—å —Ñ–æ—Ä–º—É
					</button>
				</div>
			</div>
		</div>

		<script>
			const API_URL = 'https://0594c48b9b34d094.mokky.dev/movies'

			document.addEventListener('DOMContentLoaded', function () {
				setupEventListeners()
			})

			function setupEventListeners() {
				document
					.getElementById('submit-movie')
					.addEventListener('click', handleAddMovie)
				document
					.getElementById('reset-form')
					.addEventListener('click', resetMovieForm)
			}

			async function handleAddMovie() {
				const movieData = {
					title: document.getElementById('movie-title').value,
					year: parseInt(document.getElementById('movie-year').value),
					genre: document.getElementById('movie-genre').value,
					director: document.getElementById('movie-director').value,
					rating:
						parseFloat(document.getElementById('movie-rating').value) || null,
					status: document.getElementById('movie-status').value,
					description: document.getElementById('movie-description').value,
					dateAdded: new Date().toISOString(),
				}

				if (!movieData.title || !movieData.year || !movieData.genre) {
					showMessage(
						'–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è: –Ω–∞–∑–≤–∞–Ω–∏–µ, –≥–æ–¥ –∏ –∂–∞–Ω—Ä',
						'error'
					)
					return
				}

				try {
					const response = await fetch(API_URL, {
						method: 'POST',
						headers: {
							'Content-Type': 'application/json',
						},
						body: JSON.stringify(movieData),
					})

					if (!response.ok) throw new Error('–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Ñ–∏–ª—å–º–∞')

					showMessage('–§–∏–ª—å–º —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω!', 'success')
					resetMovieForm()
				} catch (error) {
					showMessage('–û—à–∏–±–∫–∞: ' + error.message, 'error')
				}
			}

			function resetMovieForm() {
				document.getElementById('movie-title').value = ''
				document.getElementById('movie-year').value = ''
				document.getElementById('movie-genre').value = ''
				document.getElementById('movie-director').value = ''
				document.getElementById('movie-rating').value = ''
				document.getElementById('movie-status').value = 'towatch'
				document.getElementById('movie-description').value = ''
			}

			function showMessage(text, type) {
				const messageDiv = document.getElementById('message')
				messageDiv.innerHTML = `
                <div class="message ${type}">
                    ${text}
                </div>
            `

				setTimeout(() => {
					messageDiv.innerHTML = ''
				}, 4000)
			}
		</script>
	</body>
</html>
