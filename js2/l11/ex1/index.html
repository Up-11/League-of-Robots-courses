<!DOCTYPE html>
<html lang="ru">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>History API Demo</title>
		<style>
			body {
				font-family: Arial, sans-serif;
				max-width: 800px;
				margin: 0 auto;
				padding: 20px;
			}
			nav {
				background: #f5f5f5;
				padding: 15px;
				margin-bottom: 20px;
				border-radius: 5px;
			}
			nav a {
				margin-right: 15px;
				text-decoration: none;
				color: #333;
				padding: 5px 10px;
				border: 1px solid #ddd;
				border-radius: 3px;
			}
			nav a:hover {
				background: #e9e9e9;
			}
			.page {
				padding: 20px;
				border: 1px solid #ddd;
				border-radius: 5px;
				min-height: 200px;
			}
			.hidden {
				display: none;
			}
		</style>
	</head>
	<body>
		<nav>
			<a href="/" data-route="home">Главная</a>
			<a href="/about" data-route="about">О нас</a>
			<a href="/contact" data-route="contact">Контакты</a>
			<a href="/products" data-route="products">Товары</a>
		</nav>

		<div id="content">
			<div id="home" class="page">
				<h2>Главная страница</h2>
				<p>Добро пожаловать на главную страницу!</p>
				<button onclick="showAlert()">Тестовая кнопка</button>
			</div>

			<div id="about" class="page hidden">
				<h2>О нас</h2>
				<p>Информация о нашей компании.</p>
			</div>

			<div id="contact" class="page hidden">
				<h2>Контакты</h2>
				<p>Наши контактные данные:</p>
				<ul>
					<li>Email: example@mail.com</li>
					<li>Телефон: +7 (999) 123-45-67</li>
				</ul>
			</div>

			<div id="products" class="page hidden">
				<h2>Наши товары</h2>
				<p>Список товаров:</p>
				<ul>
					<li>Товар 1</li>
					<li>Товар 2</li>
					<li>Товар 3</li>
				</ul>
			</div>
		</div>

		<script>
			function navigateTo(route) {
				document.querySelectorAll('.page').forEach(page => {
					page.classList.add('hidden')
				})

				const targetPage = document.getElementById(route)
				if (targetPage) {
					targetPage.classList.remove('hidden')
				}

				const url = route === 'home' ? '/' : `/${route}`
				window.history.pushState({ route }, '', url)

				document.title = `History API - ${getPageTitle(route)}`
			}

			function getPageTitle(route) {
				const titles = {
					home: 'Главная',
					about: 'О нас',
					contact: 'Контакты',
					products: 'Товары',
				}
				return titles[route] || 'Страница'
			}
			window.addEventListener('popstate', event => {
				const route = event.state ? event.state.route : 'home'
				showPage(route)
			})

			function showPage(route) {
				document.querySelectorAll('.page').forEach(page => {
					page.classList.add('hidden')
				})

				const targetPage = document.getElementById(route)
				if (targetPage) {
					targetPage.classList.remove('hidden')
				}

				document.title = `History API - ${getPageTitle(route)}`
			}

			document.querySelectorAll('nav a').forEach(link => {
				link.addEventListener('click', event => {
					event.preventDefault()
					const route = event.target.getAttribute('data-route')
					navigateTo(route)
				})
			})

			function showAlert() {
				alert('JavaScript работает! Состояние не потеряно!')
			}

			document.addEventListener('DOMContentLoaded', () => {
				const path = window.location.pathname
				let initialRoute = 'home'

				if (path === '/about') initialRoute = 'about'
				else if (path === '/contact') initialRoute = 'contact'
				else if (path === '/products') initialRoute = 'products'

				window.history.replaceState(
					{ route: initialRoute },
					'',
					initialRoute === 'home' ? '/' : `/${initialRoute}`
				)

				showPage(initialRoute)
			})
		</script>
	</body>
</html>
